# Call content

In this section we will cover component at the highest top of the hierarchy which enable you to quickly implement a Video Call app. These components abstract the logic needed to write a functioning video call experience, which makes them less open to customisation.

## CallContent

`CallContent` is at the top of the hierarchy. It is a bound component that automatically handles Incoming/Outgoing and Active call components and states. All you have to do is pass it the `CallViewModel`:

```kotlin
@Composable
public fun CallContent(
    viewModel: CallViewModel,
    modifier: Modifier = Modifier,
    onBackPressed: () -> Unit = {},
    onCallAction: (CallAction) -> Unit = { viewModel.onCallAction(it) },
    pictureInPictureContent: @Composable (Call) -> Unit = { DefaultPictureInPictureContent(it) }
)
```

You can also override handlers and some of the content:

* **onBackPressed**: Handler that notifies of the back pressed actions to show the participants list or go back if it is not open.
* **onCallAction**: Handler that notifies that user performed some kind of a `CallAction`.
* **pictureInPictureContent**: Represents the content that will be shown in picture in picture mode.

## OutgoingCall

To show an outgoing call UI on the screen there are two options. The first one is `OutgoingCallContent`, which is a bound component. By default its state and handlers will depend on the `CallViewModel` which can be overridden.

```kotlin
@Composable
public fun OutgoingCallContent(
    viewModel: CallViewModel,
    modifier: Modifier = Modifier,
    onBackPressed: () -> Unit,
    onCallAction: (CallAction) -> Unit = viewModel::onCallAction,
)
```

The second option is the `OutgoingCall`, which is a stateless component. It allows you to provide and control the state directly.

```kotlin
@Composable
public fun OutgoingCall(
    callType: CallType,
    participants: List<CallUser>,
    callMediaState: CallMediaState,
    modifier: Modifier = Modifier,
    onBackPressed: () -> Unit,
    onCallAction: (CallAction) -> Unit,
)
```

Both allow you to override:

* **onBackPressed**: Handler that notifies of the back pressed actions to show the participants list or go back if it is not open.
<!-- TODO link call actions -->
* **onCallAction**: Handler that notifies that user performed some kind of a [`CallAction`](google.com).

The difference is that the stateless components enables you to define the states which will be shown on the screen:

* **callType**: Whether the call is video or audio. `CallType.VIDEO` specifies both audio and video whereas `CallType.AUDIO` will be just an audio call without the video capabilities.
* **participants**: The list of `CallUser`s which are participating in the call.
* **callMediaState**: The state which contains whether the camera, microphone or speaker are off or on.

Both of the components will handle showing an outgoing call screen in different states depending on the number of participants.

| One to one | Group | Group plus |
| --- | --- | --- |
| ![OneToOne](../../../assets/compose_outgoing_call_one_to_one.png) | ![Group](../../../assets/compose_outgoing_call_group.png) | ![GroupPlus](../../../assets/compose_outgoing_call_group_plus.png) |

## IncomingCall

The component behaves the same as `OutgoingCall`, but shows different UI and a different call state. You can use the component in the same two ways, the bound that only needs the `CallViewModel`:

```kotlin
@Composable
public fun IncomingCallContent(
    viewModel: CallViewModel,
    modifier: Modifier = Modifier,
    onBackPressed: () -> Unit,
    onCallAction: (CallAction) -> Unit = viewModel::onCallAction,
)
```

And the second, stateless option is the `IncomingCall` composable:

```kotlin
@Composable
public fun IncomingCall(
    participants: List<CallUser>,
    callType: CallType,
    isVideoEnabled: Boolean,
    modifier: Modifier = Modifier,
    showHeader: Boolean = true,
    onBackPressed: () -> Unit,
    onCallAction: (CallAction) -> Unit,
)
```

Both allow you to override:

* **onBackPressed**: Handler that notifies of the back pressed actions to show the participants list or go back if it is not open.
<!-- TODO link call actions -->
* **onCallAction**: Handler that notifies that user performed some kind of a [`CallAction`](google.com).

The difference is that the stateless components enables you to define the states which will be shown on the screen:

* **callType**: Whether the call is video or audio. `CallType.VIDEO` specifies both audio and video whereas `CallType.AUDIO` will be just an audio call without the video capabilities.
* **participants**: The list of `CallUser`s which are participating in the call.
* **callMediaState**: The state which contains whether the camera, microphone or speaker are off or on.
* **isVideoEnabled**: Whether the video should be enabled when entering the call or not.

Both of the components will handle showing an incoming call screen in different states depending on the number of participants.

| One to one | Group | Group plus |
| --- | --- | --- |
| ![OneToOne](../../../assets/compose_incoming_call_one_to_one.png) | ![Group](../../../assets/compose_incoming_call_group.png) | ![GroupPlus](../../../assets/compose_incoming_call_group_plus.png) |

## ActiveCall

Finally, `ActiveCallContent` shows the participants video or screenshare and call media state after the user has joined or accepted the call. Here is the component definition:

```kotlin
@Composable
public fun ActiveCallContent(
    callViewModel: CallViewModel,
    modifier: Modifier = Modifier,
    onBackPressed: () -> Unit = { callViewModel.onCallAction(LeaveCall) },
    onCallAction: (CallAction) -> Unit = callViewModel::onCallAction,
    pictureInPictureContent: @Composable (Call) -> Unit = { DefaultPictureInPictureContent(it) }
)
```

It also allows you to override some of the handlers and content:

* **onBackPressed**: Handler that notifies of the back pressed actions to show the participants list or go back if it is not open.
* **onCallAction**: Handler that notifies that user performed some kind of a `CallAction`.
* **pictureInPictureContent**: Represents the content that will be shown in picture in picture mode.

It consists of the next elements:
* [**`CallControls`**](link): exposes the media controls to the user, to toggle microphone/camera/speakerphone off/on and to leave the call.
* [**`CallParticipants`**](link): shows the current participants in the call.

| One to one | Group |
| --- | --- |
| ![OneToOne](../../../assets/compose_active_call_one_to_one.jpg) | ![Group](../../../assets/compose_active_call_group.jpg) |

`ActiveCallContent` also takes care of the orientation changes and adapts the UI accordingly.

| Landscape |
| --- | --- |
| ![Landscape](../../../assets/compose_active_call_landscape.jpeg) |

Aside from the standard participant video stream we support screensharing and have components that display the content focusing on it.

| Portrait | Landscape |
| --- | --- |
| ![Portrait](../../../assets/compose_active_call_screen_share_portrait.jpg) | ![Landscape](../../../assets/compose_active_call_screen_share_landscape.jpg) |

