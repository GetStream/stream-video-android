# CallContainer

The easiest way to set up a screen that renders a video call, which contain the current participants video feeds and the call controls is to use the `CallContainer`.

`CallContainer` sets up the following functionality by connecting multiple components:

* [**`CallAppBar`**](05-call-app-bar.mdx): Displays a call information or an additional actions, such as the number of participants,
* [**`CallContent`**](03-call-content.mdx): Content is shown by rendering video/audio when we're connected to a call successfully.
* [**`ControlActions`**](04-call-controls.mdx): Allows a user to trigger different actions to control a joining call, such as enabling a camera/audio and flipping a camera.
* [**`pictureInPictureContent`**](../06-advanced/03-enable-picture-in-picture.mdx): Content shown when the user enters Picture in Picture mode, if it's been enabled in the app.

This section will cover components at the highest top of the hierarchy, enabling you to implement a video call app quickly.
These components abstract the logic needed to write a functioning video call experience, which makes them less open to customization.

## Usage

`CallContainer` is at the top of the hierarchy. It is a bound component that automatically renders live videos, Incoming/Outgoing and Active call components depending on call states.

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)

    setContent {
        VideoTheme {

            // .. join a call here //

            CallContainer(
                modifier = Modifier.fillMaxSize(),
                call = call,
                onBackPressed = { finish() },
            )
        }
    }
}
```

:::note
Please ensure that you were already initialized StreamVideo with the `StreamVideoBuilder(..).build()` method before using the call related components, such as `CallContainer` and `CallViewModel`.
:::

You will see the result below with `CallContainer`:

![Compose CallContainer](../../assets/compose_call_container.png)

If you want to customize the behavior for your use case, you can override the action handlers.

## Handling Actions

When it comes to actions the `CallContainer` exposes, you're able to override the following:

* **onBackPressed**: Back pressed actions to go back when accessing different Call menus or trigger Picture-In-Picture mode.
* **onCallAction**: Handler that notifies that user performed some kind of a `CallAction`, to trigger enable or disable video and audio states, leaving the call and more.

These actions are defined by default, but you can override them by simply passing a custom handler when calling the component:

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContent {
        VideoTheme {
            CallContainer(
                modifier = Modifier.fillMaxSize(),
                onCallAction = {
                    // TODO - handle call actions
                },
                onBackPressed = {
                    // TODO - handle the back button is pressed
                },
            )
        }
    }
}
```

You can also pass the actions to the [CallViewModel](../05-view-model.mdx) to enable picture in picture mode. For more information, check out the [Picture and Picture](../06-advanced/03-enable-picture-in-picture.mdx).

When it comes to custom UI, the `CallContainer` exposes some slot APIs for you to consume.

## Customization

`CallContainer` is our main **Screen component** and as such offers limited customization through itself. While you can customize all the `VideoTheme` properties, to style the UI, change colors, sizes, paddings, text styles and more, you can still override some Slot APIs to customize specific UI within this component.

More specifically, the `CallContainer` exposes the following Slots:

```kotlin
@Composable
public fun CallContainer(
    ...
    appBarContent: @Composable () -> Unit = {
        CallAppBar(
            modifier = Modifier.testTag("call_appbar"),
            call = callViewModel.call,
            leadingContent = null,
            onBackPressed = onBackPressed,
            onCallAction = onCallAction
        )
    },
    controlsContent: @Composable (call: Call) -> Unit = {
        ControlActions(
            modifier = Modifier.testTag("call_controls"),
            call = call,
            onCallAction = onCallAction,
        )
    },
    videoRenderer: @Composable (
        modifier: Modifier,
        call: Call,
        participant: ParticipantState,
        style: VideoRendererStyle
    ) -> Unit = { videoModifier, videoCall, videoParticipant, videoStyle ->
        ParticipantVideo(
            modifier = videoModifier,
            call = videoCall,
            participant = videoParticipant,
            style = videoStyle
        )
    },
    pictureInPictureContent: @Composable (Call) -> Unit = { DefaultPictureInPictureContent(it) },
    style: VideoRendererStyle = RegularVideoRendererStyle(),
    callContent: @Composable (call: Call) -> Unit = {
        DefaultCallContent(
            modifier = modifier.testTag("call_content"),
            callViewModel = callViewModel,
            onBackPressed = onBackPressed,
            onCallAction = onCallAction,
            appBarContent = appBarContent,
            controlsContent = controlsContent,
            pictureInPictureContent = pictureInPictureContent
        )
    },
)
```

- **[appBarContent](05-call-app-bar.mdx)**: Represents the content that handle a back button and shows the call information, such as the status, the number of participants.
- **[controlsContent](04-call-controls.mdx)**: Represents the content that features various controls and actions in a call, such as audio and video handles and leaving a call.
- **[videoRenderer](../02-video-renderer.mdx)**: A single video renderer renders each individual participant.
- **[style](../02-video-renderer.mdx)**: Represents a regular video call render styles.
- **[pictureInPictureContent](../06-advanced/03-enable-picture-in-picture.mdx)**: Represents the content that will be shown in Picture-In-Picture mode.
- **[callContent](03-call-content.mdx)**: Represents the active call content, when the user fully joins and connects to a call.

Using any of these slots, you can fully replace the content that's shown in different states and you can build these components to be rendered differently, as the state updates.
