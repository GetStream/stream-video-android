---
title: ViewModel & Activity
description: How to use the CallViewModel and AbstractCallActivity
---

We include a ViewModel & AbstractCallActivity to quickly help you build in-app video calling.calling
Using these is optional, for more complex integrations you might want to build your viewmodel and activity.

### CallViewModel

The call viewModel is a light wrapper around the core call behaviour. It automatically handles

* Picture in picture
* Cleans up the call when it's no longer in use by the UI

Everything else is handled by **viewModel.call** and **viewModel.client**

In the example below you see how to create a call view model in an activity

```kotlin
// create viewmodel
private val factory by lazy { callViewModelFactory() }
public val callViewModel: CallViewModel by viewModels { factory }

/**
 * Provides the default ViewModel factory.
 */
private fun callViewModelFactory(): CallViewModelFactory {
    val (type, id) = intent.getStringExtra(EXTRA_CID)?.toTypeAndId()
        ?: throw IllegalArgumentException("You must pass correct call id.")

    return CallViewModelFactory(
        call = StreamVideo.instance().call(type = type, id = id)
    )
}
```

Creating a viewmodel in compose is a bit easier:

```kotlin

```

Typically we recommend that you build your own viewmodel and use the included callViewModel as inspiration.

### AbstractCallActivity

If you subclass the AbstractCallActivity you get several things out of the box:

* FullScreen support
* Picture in picture support

This example shows how to use the AbstractCallActivity

```kotlin
```